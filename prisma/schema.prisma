generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model events {
  id                BigInt              @id @default(autoincrement())
  name              String?             @db.VarChar
  guild_id          BigInt?
  channel_id        BigInt?
  banner            String?             @db.VarChar
  game_name         String?             @db.VarChar
  start_time        Int?
  manager_id        BigInt?
  prize             String?             @db.VarChar
  max_teams         Int?
  min_team_player   Int?
  max_team_player   Int?
  rules             String?
  details           String?
  is_solo           Boolean?
  extra             Json?
  redirect_url      String?             @db.VarChar
  guild_url         String?             @db.VarChar
  role_id           BigInt?
  registrations     registrations[]
  registrationusers registrationusers[]
}

model registrations {
  id                BigInt              @id @default(autoincrement())
  event_id          BigInt
  team_name         String?             @db.VarChar
  local_id          Int?
  extra             Json?
  events            events              @relation(fields: [event_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_event")
  registrationusers registrationusers[]
}

model registrationusers {
  user_id         BigInt
  registration_id BigInt
  event_id        BigInt
  user_name       String?       @db.VarChar
  pfp             String?       @db.VarChar
  events          events        @relation(fields: [event_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_event")
  registrations   registrations @relation(fields: [registration_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_reg")

  @@id([user_id, registration_id])
}
